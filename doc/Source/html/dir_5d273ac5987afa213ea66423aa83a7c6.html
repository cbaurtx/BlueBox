<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BlueBox: managed_components/espressif__esp-dsp/applications/lyrat_board_app Directory Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">BlueBox<span id="projectnumber">&#160;0.9</span>
   </div>
   <div id="projectbrief">BlueBox Bluetooth sink</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>managed_components</b></li><li class="navelem"><a href="dir_d664d8157ae9d72e0e60106055df655c.html">espressif__esp-dsp</a></li><li class="navelem"><a href="dir_56f5fd676f817375362b0a5a27250ea7.html">applications</a></li><li class="navelem"><a href="dir_5d273ac5987afa213ea66423aa83a7c6.html">lyrat_board_app</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="headertitle"><div class="title">lyrat_board_app Directory Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Directory dependency graph for lyrat_board_app:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" loading="lazy" frameborder="0" src="dir_5d273ac5987afa213ea66423aa83a7c6_dep.svg" width="263" height="128"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-subdirs" class="groupheader"><a id="subdirs" name="subdirs"></a>
Directories</h2></td></tr>
<tr class="memitem:main" id="r_main"><td class="memItemLeft" align="right" valign="top"><span class="iconfolder"><div class="folder-icon"></div></span>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_3b30881b5537d41f1035410607dc13ef.html">main</a></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<h1 class="doxsection"><a class="anchor" id="autotoc_md16"></a>
ESP-DSP LyraT Board audio processing application</h1>
<p>The demo applications are developed for the ESP32-LyraT development board and demonstrate the usage of IIR filters from the ESP-DSP library. This example showcases how to use IIR filter functionality to process audio stream data. To hear the audio please connect headphones or speakers to the ESP32-LyraT audio output. The example performs the following steps:</p>
<ol type="1">
<li>Read samples from a file<ul>
<li>read samples from file</li>
<li>write audio samples to the triple buffer</li>
</ul>
</li>
<li>Process audio samples<ul>
<li>process volume/bass/treble</li>
<li>apply digital limiter to the audio data</li>
<li>control audio buffer overflow</li>
</ul>
</li>
<li>Pass samples to the audio codec</li>
</ol>
<p>To control the volume/bass/treble, please select the value by press 'Set' button and adjust the value by '+/-' buttons.</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md17"></a>
The Triple Audio Buffer</h1>
<p>In audion processing, it's possible to have situation when one task write data to the processing buffer (processing task), and another task read data from the same buffer, and still in reading process. Triple buffering is a technique used in audio processing to minimize latency and ensure smooth playback. It involves using three buffers to store audio data. Here's a description of how it works:</p>
<ul>
<li>Buffer A: This buffer holds the audio data that is currently being processed by the audio system. It is typically filled with samples from the audio source and processed in real-time.</li>
<li>Buffer B: When Buffer A is full, the audio system begins reading from Buffer A and starts processing the data. At the same time, Buffer B is filled with new audio samples from the source.</li>
<li>Buffer C: Once Buffer B is full, the audio system switches its attention to Buffer B and continues processing data. Buffer C is then filled with the latest audio samples.</li>
</ul>
<p>The cycle continues, with the audio system always processing the data from a buffer while the other two buffers are being filled. This approach helps ensure a continuous and uninterrupted audio playback, as there is always a buffer ready to be processed. It reduces the chances of audio glitches or dropouts caused by delays in reading or processing the audio data.</p>
<p>Triple buffering is particularly useful when working with real-time audio processing applications, where low latency and uninterrupted playback are crucial.</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md18"></a>
Audio Processing Flow</h1>
<p>The audio processing flow contains next blocks:</p><ol type="1">
<li>Audio processing task<ul>
<li>Read data from file and store to the triple buffer</li>
<li>Read from triple buffer and concert data from int16_t to float</li>
<li>Process bass</li>
<li>Process treble</li>
<li>Process volume</li>
<li>Apply digital limiter</li>
<li>Convert data from float to int16_t and store to the triple buffer</li>
</ul>
</li>
<li>Audio output task<ul>
<li>Write data from triple buffer to audio codec</li>
</ul>
</li>
<li>Buttons control task<ul>
<li>React on buttons and adjust the control values</li>
<li>Calculates IIR filter coefficients</li>
</ul>
</li>
</ol>
<h1 class="doxsection"><a class="anchor" id="autotoc_md19"></a>
How to use the example</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md20"></a>
Hardware required</h2>
<p>This example require LyraT development board.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md21"></a>
Configure the project</h2>
<p>Under Component Config ---&gt; DSP Library ---&gt; DSP Optimization, it's possible to choose either the optimized or ANSI implementation, to compare them.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md22"></a>
Build and flash</h2>
<p>Build the project and flash it to the board, then run monitor tool to view serial output (replace PORT with serial port name):</p>
<div class="fragment"><div class="line">idf.py flash monitor</div>
</div><!-- fragment --><p>(To exit the serial monitor, type <span class="tt">Ctrl-]</span>.)</p>
<p>See the Getting Started Guide for full steps to configure and use ESP-IDF to build projects. </p>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
