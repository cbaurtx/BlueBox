<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BlueBox: The new bytecode</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">BlueBox<span id="projectnumber">&#160;0.9</span>
   </div>
   <div id="projectbrief">BlueBox Bluetooth sink</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">The new bytecode </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md397"></a></p>
<p>We will reimplement the VM to use 8bit instruction code. By bytecode, we mean real byte code. The whole purpose is reducing the memory consumption of mruby VM.</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md398"></a>
Instructions</h1>
<p>Instructions are bytes. There can be 256 instructions. Currently, we have 106 instructions. Instructions can take 0 to 3 operands.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md399"></a>
operands</h2>
<p>The size of operands can be either 8bits, 16bits or 24bits. In the table.1 below, the second field describes the size of operands.</p>
<ul>
<li>B: 8bit</li>
<li>S: 16bit</li>
<li>W: 24bit</li>
</ul>
<p>If the first and second operands are of type <span class="tt">B</span> (8bits), they may be extended to 16bits by the operand extension instruction immediately preceding them. See also <span class="tt">OP_EXT1</span>, <span class="tt">OP_EXT2</span> and <span class="tt">OP_EXT3</span>.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md400"></a>
table.1 Instruction Table</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Instruction Name  </th><th class="markdownTableHeadNone">Operand type  </th><th class="markdownTableHeadNone">Semantics  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">OP_NOP</span>  </td><td class="markdownTableBodyNone"><span class="tt">-</span>  </td><td class="markdownTableBodyNone"><span class="tt">no operation</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">OP_MOVE</span>  </td><td class="markdownTableBodyNone"><span class="tt">BB</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = R(b)</span>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">OP_LOADL</span>  </td><td class="markdownTableBodyNone"><span class="tt">BB</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = Pool(b)</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">OP_LOADI</span>  </td><td class="markdownTableBodyNone"><span class="tt">BB</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = mrb_int(b)</span>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">OP_LOADINEG</span>  </td><td class="markdownTableBodyNone"><span class="tt">BB</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = mrb_int(-b)</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">OP_LOADI__1</span>  </td><td class="markdownTableBodyNone"><span class="tt">B</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = mrb_int(-1)</span>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">OP_LOADI_0</span>  </td><td class="markdownTableBodyNone"><span class="tt">B</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = mrb_int(0)</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">OP_LOADI_1</span>  </td><td class="markdownTableBodyNone"><span class="tt">B</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = mrb_int(1)</span>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">OP_LOADI_2</span>  </td><td class="markdownTableBodyNone"><span class="tt">B</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = mrb_int(2)</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">OP_LOADI_3</span>  </td><td class="markdownTableBodyNone"><span class="tt">B</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = mrb_int(3)</span>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">OP_LOADI_4</span>  </td><td class="markdownTableBodyNone"><span class="tt">B</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = mrb_int(4)</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">OP_LOADI_5</span>  </td><td class="markdownTableBodyNone"><span class="tt">B</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = mrb_int(5)</span>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">OP_LOADI_6</span>  </td><td class="markdownTableBodyNone"><span class="tt">B</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = mrb_int(6)</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">OP_LOADI_7</span>  </td><td class="markdownTableBodyNone"><span class="tt">B</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = mrb_int(7)</span>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">OP_LOADI16</span>  </td><td class="markdownTableBodyNone"><span class="tt">BS</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = mrb_int(b)</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">OP_LOADI32</span>  </td><td class="markdownTableBodyNone"><span class="tt">BSS</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = mrb_int((b&lt;&lt;16)+c)</span>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">OP_LOADSYM</span>  </td><td class="markdownTableBodyNone"><span class="tt">BB</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = Syms(b)</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">OP_LOADNIL</span>  </td><td class="markdownTableBodyNone"><span class="tt">B</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = nil</span>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">OP_LOADSELF</span>  </td><td class="markdownTableBodyNone"><span class="tt">B</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = self</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">OP_LOADT</span>  </td><td class="markdownTableBodyNone"><span class="tt">B</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = true</span>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">OP_LOADF</span>  </td><td class="markdownTableBodyNone"><span class="tt">B</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = false</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">OP_GETGV</span>  </td><td class="markdownTableBodyNone"><span class="tt">BB</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = getglobal(Syms(b))</span>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">OP_SETGV</span>  </td><td class="markdownTableBodyNone"><span class="tt">BB</span>  </td><td class="markdownTableBodyNone"><span class="tt">setglobal(Syms(b), R(a))</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">OP_GETSV</span>  </td><td class="markdownTableBodyNone"><span class="tt">BB</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = Special[Syms(b)]</span>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">OP_SETSV</span>  </td><td class="markdownTableBodyNone"><span class="tt">BB</span>  </td><td class="markdownTableBodyNone"><span class="tt">Special[Syms(b)] = R(a)</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">OP_GETIV</span>  </td><td class="markdownTableBodyNone"><span class="tt">BB</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = ivget(Syms(b))</span>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">OP_SETIV</span>  </td><td class="markdownTableBodyNone"><span class="tt">BB</span>  </td><td class="markdownTableBodyNone"><span class="tt">ivset(Syms(b),R(a))</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">OP_GETCV</span>  </td><td class="markdownTableBodyNone"><span class="tt">BB</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = cvget(Syms(b))</span>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">OP_SETCV</span>  </td><td class="markdownTableBodyNone"><span class="tt">BB</span>  </td><td class="markdownTableBodyNone"><span class="tt">cvset(Syms(b),R(a))</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">OP_GETCONST</span>  </td><td class="markdownTableBodyNone"><span class="tt">BB</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = constget(Syms(b))</span>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">OP_SETCONST</span>  </td><td class="markdownTableBodyNone"><span class="tt">BB</span>  </td><td class="markdownTableBodyNone"><span class="tt">constset(Syms(b),R(a))</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">OP_GETMCNST</span>  </td><td class="markdownTableBodyNone"><span class="tt">BB</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = R(a)::Syms(b)</span>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">OP_SETMCNST</span>  </td><td class="markdownTableBodyNone"><span class="tt">BB</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a+1)::Syms(b) = R(a)</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">OP_GETUPVAR</span>  </td><td class="markdownTableBodyNone"><span class="tt">BBB</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = uvget(b,c)</span>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">OP_SETUPVAR</span>  </td><td class="markdownTableBodyNone"><span class="tt">BBB</span>  </td><td class="markdownTableBodyNone"><span class="tt">uvset(b,c,R(a))</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">OP_GETIDX</span>  </td><td class="markdownTableBodyNone"><span class="tt">B</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = R(a)[R(a+1)]</span>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">OP_SETIDX</span>  </td><td class="markdownTableBodyNone"><span class="tt">B</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a)[R(a+1)] = R(a+2)</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">OP_JMP</span>  </td><td class="markdownTableBodyNone"><span class="tt">S</span>  </td><td class="markdownTableBodyNone"><span class="tt">pc+=a</span>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">OP_JMPIF</span>  </td><td class="markdownTableBodyNone"><span class="tt">BS</span>  </td><td class="markdownTableBodyNone"><span class="tt">if R(a) pc+=b</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">OP_JMPNOT</span>  </td><td class="markdownTableBodyNone"><span class="tt">BS</span>  </td><td class="markdownTableBodyNone"><span class="tt">if !R(a) pc+=b</span>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">OP_JMPNIL</span>  </td><td class="markdownTableBodyNone"><span class="tt">BS</span>  </td><td class="markdownTableBodyNone"><span class="tt">if R(a)==nil pc+=b</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">OP_JMPUW</span>  </td><td class="markdownTableBodyNone"><span class="tt">S</span>  </td><td class="markdownTableBodyNone"><span class="tt">unwind_and_jump_to(a)</span>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">OP_EXCEPT</span>  </td><td class="markdownTableBodyNone"><span class="tt">B</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = exc</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">OP_RESCUE</span>  </td><td class="markdownTableBodyNone"><span class="tt">BB</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(b) = R(a).isa?(R(b))</span>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">OP_RAISEIF</span>  </td><td class="markdownTableBodyNone"><span class="tt">B</span>  </td><td class="markdownTableBodyNone"><span class="tt">raise(R(a)) if R(a)</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">OP_SSEND</span>  </td><td class="markdownTableBodyNone"><span class="tt">BBB</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = self.send(Syms(b),R(a+1)..,R(a+n+1):R(a+n+2)..) (c=n\|k&lt;&lt;4)</span>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">OP_SSENDB</span>  </td><td class="markdownTableBodyNone"><span class="tt">BBB</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = self.send(Syms(b),R(a+1)..,R(a+n+1):R(a+n+2)..,&amp;R(a+n+2k+1))</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">OP_SEND</span>  </td><td class="markdownTableBodyNone"><span class="tt">BBB</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = R(a).send(Syms(b),R(a+1)..,R(a+n+1):R(a+n+2)..) (c=n\|k&lt;&lt;4)</span>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">OP_SENDB</span>  </td><td class="markdownTableBodyNone"><span class="tt">BBB</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = R(a).send(Syms(b),R(a+1)..,R(a+n+1):R(a+n+2)..,&amp;R(a+n+2k+1))</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">OP_CALL</span>  </td><td class="markdownTableBodyNone"><span class="tt">-</span>  </td><td class="markdownTableBodyNone"><span class="tt">self.call(*, **, &amp;) (But overlay the current call frame; tailcall)</span>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">OP_SUPER</span>  </td><td class="markdownTableBodyNone"><span class="tt">BB</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = super(R(a+1),... ,R(a+b+1))</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">OP_ARGARY</span>  </td><td class="markdownTableBodyNone"><span class="tt">BS</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = argument array (16=m5:r1:m5:d1:lv4)</span>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">OP_ENTER</span>  </td><td class="markdownTableBodyNone"><span class="tt">W</span>  </td><td class="markdownTableBodyNone"><span class="tt">arg setup according to flags (23=m5:o5:r1:m5:k5:d1:b1)</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">OP_KEY_P</span>  </td><td class="markdownTableBodyNone"><span class="tt">BB</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = kdict.key?(Syms(b))</span>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">OP_KEYEND</span>  </td><td class="markdownTableBodyNone"><span class="tt">-</span>  </td><td class="markdownTableBodyNone"><span class="tt">raise unless kdict.empty?</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">OP_KARG</span>  </td><td class="markdownTableBodyNone"><span class="tt">BB</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = kdict[Syms(b)]; kdict.delete(Syms(b))</span>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">OP_RETURN</span>  </td><td class="markdownTableBodyNone"><span class="tt">B</span>  </td><td class="markdownTableBodyNone"><span class="tt">return R(a) (normal)</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">OP_RETURN_BLK</span>  </td><td class="markdownTableBodyNone"><span class="tt">B</span>  </td><td class="markdownTableBodyNone"><span class="tt">return R(a) (in-block return)</span>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">OP_BREAK</span>  </td><td class="markdownTableBodyNone"><span class="tt">B</span>  </td><td class="markdownTableBodyNone"><span class="tt">break R(a)</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">OP_BLKPUSH</span>  </td><td class="markdownTableBodyNone"><span class="tt">BS</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = block (16=m5:r1:m5:d1:lv4)</span>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">OP_ADD</span>  </td><td class="markdownTableBodyNone"><span class="tt">B</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = R(a)+R(a+1)</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">OP_ADDI</span>  </td><td class="markdownTableBodyNone"><span class="tt">BB</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = R(a)+mrb_int(b)</span>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">OP_SUB</span>  </td><td class="markdownTableBodyNone"><span class="tt">B</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = R(a)-R(a+1)</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">OP_SUBI</span>  </td><td class="markdownTableBodyNone"><span class="tt">BB</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = R(a)-mrb_int(b)</span>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">OP_MUL</span>  </td><td class="markdownTableBodyNone"><span class="tt">B</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = R(a)*R(a+1)</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">OP_DIV</span>  </td><td class="markdownTableBodyNone"><span class="tt">B</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = R(a)/R(a+1)</span>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">OP_EQ</span>  </td><td class="markdownTableBodyNone"><span class="tt">B</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = R(a)==R(a+1)</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">OP_LT</span>  </td><td class="markdownTableBodyNone"><span class="tt">B</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = R(a)&lt;R(a+1)</span>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">OP_LE</span>  </td><td class="markdownTableBodyNone"><span class="tt">B</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = R(a)&lt;=R(a+1)</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">OP_GT</span>  </td><td class="markdownTableBodyNone"><span class="tt">B</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = R(a)&gt;R(a+1)</span>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">OP_GE</span>  </td><td class="markdownTableBodyNone"><span class="tt">B</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = R(a)&gt;=R(a+1)</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">OP_ARRAY</span>  </td><td class="markdownTableBodyNone"><span class="tt">BB</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = ary_new(R(a),R(a+1)..R(a+b))</span>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">OP_ARRAY2</span>  </td><td class="markdownTableBodyNone"><span class="tt">BBB</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = ary_new(R(b),R(b+1)..R(b+c))</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">OP_ARYCAT</span>  </td><td class="markdownTableBodyNone"><span class="tt">B</span>  </td><td class="markdownTableBodyNone"><span class="tt">ary_cat(R(a),R(a+1))</span>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">OP_ARYPUSH</span>  </td><td class="markdownTableBodyNone"><span class="tt">BB</span>  </td><td class="markdownTableBodyNone"><span class="tt">ary_push(R(a),R(a+1)..R(a+b))</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">OP_ARYSPLAT</span>  </td><td class="markdownTableBodyNone"><span class="tt">B</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = ary_splat(R(a))</span>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">OP_AREF</span>  </td><td class="markdownTableBodyNone"><span class="tt">BBB</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = R(b)[c]</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">OP_ASET</span>  </td><td class="markdownTableBodyNone"><span class="tt">BBB</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(b)[c] = R(a)</span>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">OP_APOST</span>  </td><td class="markdownTableBodyNone"><span class="tt">BBB</span>  </td><td class="markdownTableBodyNone"><span class="tt">*R(a),R(a+1)..R(a+c) = R(a)[b..]</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">OP_INTERN</span>  </td><td class="markdownTableBodyNone"><span class="tt">B</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = intern(R(a))</span>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">OP_SYMBOL</span>  </td><td class="markdownTableBodyNone"><span class="tt">BB</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = intern(Pool(b))</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">OP_STRING</span>  </td><td class="markdownTableBodyNone"><span class="tt">BB</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = str_dup(Pool(b))</span>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">OP_STRCAT</span>  </td><td class="markdownTableBodyNone"><span class="tt">B</span>  </td><td class="markdownTableBodyNone"><span class="tt">str_cat(R(a),R(a+1))</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">OP_HASH</span>  </td><td class="markdownTableBodyNone"><span class="tt">BB</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = hash_new(R(a),R(a+1)..R(a+b*2-1))</span>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">OP_HASHADD</span>  </td><td class="markdownTableBodyNone"><span class="tt">BB</span>  </td><td class="markdownTableBodyNone"><span class="tt">hash_push(R(a),R(a+1)..R(a+b*2))</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">OP_HASHCAT</span>  </td><td class="markdownTableBodyNone"><span class="tt">B</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = hash_cat(R(a),R(a+1))</span>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">OP_LAMBDA</span>  </td><td class="markdownTableBodyNone"><span class="tt">BB</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = lambda(Irep(b),OP_L_LAMBDA)</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">OP_BLOCK</span>  </td><td class="markdownTableBodyNone"><span class="tt">BB</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = lambda(Irep(b),OP_L_BLOCK)</span>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">OP_METHOD</span>  </td><td class="markdownTableBodyNone"><span class="tt">BB</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = lambda(Irep(b),OP_L_METHOD)</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">OP_RANGE_INC</span>  </td><td class="markdownTableBodyNone"><span class="tt">B</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = range_new(R(a),R(a+1),FALSE)</span>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">OP_RANGE_EXC</span>  </td><td class="markdownTableBodyNone"><span class="tt">B</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = range_new(R(a),R(a+1),TRUE)</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">OP_OCLASS</span>  </td><td class="markdownTableBodyNone"><span class="tt">B</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = ::Object</span>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">OP_CLASS</span>  </td><td class="markdownTableBodyNone"><span class="tt">BB</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = newclass(R(a),Syms(b),R(a+1))</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">OP_MODULE</span>  </td><td class="markdownTableBodyNone"><span class="tt">BB</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = newmodule(R(a),Syms(b))</span>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">OP_EXEC</span>  </td><td class="markdownTableBodyNone"><span class="tt">BB</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = blockexec(R(a),Irep(b))</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">OP_DEF</span>  </td><td class="markdownTableBodyNone"><span class="tt">BB</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a).newmethod(Syms(b),R(a+1)); R(a) = Syms(b)</span>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">OP_ALIAS</span>  </td><td class="markdownTableBodyNone"><span class="tt">BB</span>  </td><td class="markdownTableBodyNone"><span class="tt">alias_method(target_class,Syms(a),Syms(b))</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">OP_UNDEF</span>  </td><td class="markdownTableBodyNone"><span class="tt">B</span>  </td><td class="markdownTableBodyNone"><span class="tt">undef_method(target_class,Syms(a))</span>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">OP_SCLASS</span>  </td><td class="markdownTableBodyNone"><span class="tt">B</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = R(a).singleton_class</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">OP_TCLASS</span>  </td><td class="markdownTableBodyNone"><span class="tt">B</span>  </td><td class="markdownTableBodyNone"><span class="tt">R(a) = target_class</span>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">OP_DEBUG</span>  </td><td class="markdownTableBodyNone"><span class="tt">BBB</span>  </td><td class="markdownTableBodyNone"><span class="tt">print a,b,c</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">OP_ERR</span>  </td><td class="markdownTableBodyNone"><span class="tt">B</span>  </td><td class="markdownTableBodyNone"><span class="tt">raise(LocalJumpError, Pool(a))</span>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">OP_EXT1</span>  </td><td class="markdownTableBodyNone"><span class="tt">-</span>  </td><td class="markdownTableBodyNone"><span class="tt">make 1st operand (a) 16bit</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">OP_EXT2</span>  </td><td class="markdownTableBodyNone"><span class="tt">-</span>  </td><td class="markdownTableBodyNone"><span class="tt">make 2nd operand (b) 16bit</span>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">OP_EXT3</span>  </td><td class="markdownTableBodyNone"><span class="tt">-</span>  </td><td class="markdownTableBodyNone"><span class="tt">make 1st and 2nd operands 16bit</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">OP_STOP</span>  </td><td class="markdownTableBodyNone"><span class="tt">-</span>  </td><td class="markdownTableBodyNone"><span class="tt">stop VM</span>  </td></tr>
</table>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
