\chapter{User visible changes in {\ttfamily mruby3.\+2} from {\ttfamily mruby3.\+1} }
\hypertarget{md_managed__components_2espressif____nghttp_2nghttp2_2third-party_2mruby_2doc_2mruby3_82}{}\label{md_managed__components_2espressif____nghttp_2nghttp2_2third-party_2mruby_2doc_2mruby3_82}\index{User visible changes in $<$tt$>$mruby3.2$<$/tt$>$ from $<$tt$>$mruby3.1$<$/tt$>$@{User visible changes in $<$tt$>$mruby3.2$<$/tt$>$ from $<$tt$>$mruby3.1$<$/tt$>$}}
\label{md_managed__components_2espressif____nghttp_2nghttp2_2third-party_2mruby_2doc_2mruby3_82_autotoc_md486}%
\Hypertarget{md_managed__components_2espressif____nghttp_2nghttp2_2third-party_2mruby_2doc_2mruby3_82_autotoc_md486}%
\hypertarget{md_managed__components_2espressif____nghttp_2nghttp2_2third-party_2mruby_2doc_2mruby3_82_autotoc_md487}{}\doxysection{\texorpdfstring{The language}{The language}}\label{md_managed__components_2espressif____nghttp_2nghttp2_2third-party_2mruby_2doc_2mruby3_82_autotoc_md487}

\begin{DoxyItemize}
\item Now {\ttfamily a\+::B = c} should evaluate {\ttfamily a} then {\ttfamily c}.
\item Anonymous arguments {\ttfamily \texorpdfstring{$\ast$}{*}}, {\ttfamily \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}}, {\ttfamily \&} can be passed for forwarding.
\item Multi-\/precision integer is available now via {\ttfamily mruby-\/bigint} gem.
\end{DoxyItemize}\hypertarget{md_managed__components_2espressif____nghttp_2nghttp2_2third-party_2mruby_2doc_2mruby3_82_autotoc_md488}{}\doxysection{\texorpdfstring{mruby VM and bytecode}{mruby VM and bytecode}}\label{md_managed__components_2espressif____nghttp_2nghttp2_2third-party_2mruby_2doc_2mruby3_82_autotoc_md488}

\begin{DoxyItemize}
\item {\ttfamily OP\+\_\+\+ARYDUP} was renamed to {\ttfamily OP\+\_\+\+ARYSPLAT}. The instruction name was changed but instruction number and basic behavior have not changed (except that {\ttfamily ARYDUP nil} makes {\ttfamily \mbox{[}\mbox{]}}).
\end{DoxyItemize}\hypertarget{md_managed__components_2espressif____nghttp_2nghttp2_2third-party_2mruby_2doc_2mruby3_82_autotoc_md489}{}\doxysection{\texorpdfstring{Tools}{Tools}}\label{md_managed__components_2espressif____nghttp_2nghttp2_2third-party_2mruby_2doc_2mruby3_82_autotoc_md489}
\hypertarget{md_managed__components_2espressif____nghttp_2nghttp2_2third-party_2mruby_2doc_2mruby3_82_autotoc_md490}{}\doxysubsection{\texorpdfstring{{\ttfamily mruby}}{{\ttfamily mruby}}}\label{md_managed__components_2espressif____nghttp_2nghttp2_2third-party_2mruby_2doc_2mruby3_82_autotoc_md490}

\begin{DoxyItemize}
\item {\ttfamily -\/b} only specifies the script is the binary. The files loaded by {\ttfamily -\/r} are not affected by the option.
\item {\ttfamily mruby} now loads complied binary if the suffix is {\ttfamily .mrb}.
\end{DoxyItemize}\hypertarget{md_managed__components_2espressif____nghttp_2nghttp2_2third-party_2mruby_2doc_2mruby3_82_autotoc_md491}{}\doxysubsection{\texorpdfstring{{\ttfamily mrbc}}{{\ttfamily mrbc}}}\label{md_managed__components_2espressif____nghttp_2nghttp2_2third-party_2mruby_2doc_2mruby3_82_autotoc_md491}

\begin{DoxyItemize}
\item Add {\ttfamily -\/-\/no-\/optimize} option to disable optimization.
\end{DoxyItemize}\hypertarget{md_managed__components_2espressif____nghttp_2nghttp2_2third-party_2mruby_2doc_2mruby3_82_autotoc_md492}{}\doxysection{\texorpdfstring{mrbgems}{mrbgems}}\label{md_managed__components_2espressif____nghttp_2nghttp2_2third-party_2mruby_2doc_2mruby3_82_autotoc_md492}
\hypertarget{md_managed__components_2espressif____nghttp_2nghttp2_2third-party_2mruby_2doc_2mruby3_82_autotoc_md493}{}\doxysubsection{\texorpdfstring{mruby-\/class-\/ext}{mruby-\/class-\/ext}}\label{md_managed__components_2espressif____nghttp_2nghttp2_2third-party_2mruby_2doc_2mruby3_82_autotoc_md493}

\begin{DoxyItemize}
\item Add {\ttfamily Class\#subclasses} method.
\item Add {\ttfamily Module\#undefined\+\_\+instance\+\_\+methods} method.
\end{DoxyItemize}\hypertarget{md_managed__components_2espressif____nghttp_2nghttp2_2third-party_2mruby_2doc_2mruby3_82_autotoc_md494}{}\doxysubsection{\texorpdfstring{New bundled gems}{New bundled gems}}\label{md_managed__components_2espressif____nghttp_2nghttp2_2third-party_2mruby_2doc_2mruby3_82_autotoc_md494}

\begin{DoxyItemize}
\item mruby-\/errno from \href{https://github.com/iij/mruby-errno.git}{\texttt{https\+://github.\+com/iij/mruby-\/errno.\+git}}
\item mruby-\/set from \href{https://github.com/yui-knk/mruby-set.git}{\texttt{https\+://github.\+com/yui-\/knk/mruby-\/set.\+git}}
\item mruby-\/dir from \href{https://github.com/iij/mruby-dir.git}{\texttt{https\+://github.\+com/iij/mruby-\/dir.\+git}}
\item mruby-\/data
\end{DoxyItemize}\hypertarget{md_managed__components_2espressif____nghttp_2nghttp2_2third-party_2mruby_2doc_2mruby3_82_autotoc_md495}{}\doxysection{\texorpdfstring{Breaking Changes}{Breaking Changes}}\label{md_managed__components_2espressif____nghttp_2nghttp2_2third-party_2mruby_2doc_2mruby3_82_autotoc_md495}
\hypertarget{md_managed__components_2espressif____nghttp_2nghttp2_2third-party_2mruby_2doc_2mruby3_82_autotoc_md496}{}\doxysubsection{\texorpdfstring{{\ttfamily mrb\+\_\+vm\+\_\+run()} may detach top-\/level local variables referenced from blocks}{{\ttfamily mrb\+\_\+vm\+\_\+run()} may detach top-\/level local variables referenced from blocks}}\label{md_managed__components_2espressif____nghttp_2nghttp2_2third-party_2mruby_2doc_2mruby3_82_autotoc_md496}
When the {\ttfamily mrb\+\_\+vm\+\_\+run()} function (including {\ttfamily mrb\+\_\+top\+\_\+run()}) is called, the previous top-\/level local variables referenced from blocks is detached under either of the following conditions.


\begin{DoxyItemize}
\item If the {\ttfamily stack\+\_\+keep} parameter is given as 0.
\item If the number of variables in {\ttfamily irep} to be executed is less than the number of previous top-\/level local variables.
\end{DoxyItemize}

This change also affects API functions such as {\ttfamily mrb\+\_\+load\+\_\+string()} and {\ttfamily \doxylink{compile_8h_aa89f44c443d9b33b553f089e03561700}{mrb\+\_\+load\+\_\+file()}}. The conditions under which the previous top-\/level local variables referenced from blocks is detached in these functions are as follows\+:


\begin{DoxyItemize}
\item If the function has no {\ttfamily mrbc\+\_\+context} pointer parameter, or the {\ttfamily mrbc\+\_\+context} pointer parameter is set to {\ttfamily NULL}.
\item If the number of variables held in the {\ttfamily mrbc\+\_\+context} pointer is less than the number of previous top-\/level local variables.
\end{DoxyItemize}

Intentional reliance on previous behavior may cause compatibility problems in your application.\hypertarget{md_managed__components_2espressif____nghttp_2nghttp2_2third-party_2mruby_2doc_2mruby3_82_autotoc_md497}{}\doxysection{\texorpdfstring{CVEs}{CVEs}}\label{md_managed__components_2espressif____nghttp_2nghttp2_2third-party_2mruby_2doc_2mruby3_82_autotoc_md497}
Following CVEs are fixed.


\begin{DoxyItemize}
\item \href{https://www.cve.org/CVERecord?id=CVE-2022-0080}{\texttt{CVE-\/2022-\/0080}}
\item \href{https://www.cve.org/CVERecord?id=CVE-2022-0240}{\texttt{CVE-\/2022-\/0240}}
\item \href{https://www.cve.org/CVERecord?id=CVE-2022-0326}{\texttt{CVE-\/2022-\/0326}}
\item \href{https://www.cve.org/CVERecord?id=CVE-2022-0481}{\texttt{CVE-\/2022-\/0481}}
\item \href{https://www.cve.org/CVERecord?id=CVE-2022-0525}{\texttt{CVE-\/2022-\/0525}}
\item \href{https://www.cve.org/CVERecord?id=CVE-2022-0570}{\texttt{CVE-\/2022-\/0570}}
\item \href{https://www.cve.org/CVERecord?id=CVE-2022-0614}{\texttt{CVE-\/2022-\/0614}}
\item \href{https://www.cve.org/CVERecord?id=CVE-2022-0623}{\texttt{CVE-\/2022-\/0623}}
\item \href{https://www.cve.org/CVERecord?id=CVE-2022-0630}{\texttt{CVE-\/2022-\/0630}}
\item \href{https://www.cve.org/CVERecord?id=CVE-2022-0631}{\texttt{CVE-\/2022-\/0631}}
\item \href{https://www.cve.org/CVERecord?id=CVE-2022-0632}{\texttt{CVE-\/2022-\/0632}}
\item \href{https://www.cve.org/CVERecord?id=CVE-2022-0717}{\texttt{CVE-\/2022-\/0717}}
\item \href{https://www.cve.org/CVERecord?id=CVE-2022-0890}{\texttt{CVE-\/2022-\/0890}}
\item \href{https://www.cve.org/CVERecord?id=CVE-2022-1106}{\texttt{CVE-\/2022-\/1106}}
\item \href{https://www.cve.org/CVERecord?id=CVE-2022-1212}{\texttt{CVE-\/2022-\/1212}}
\item \href{https://www.cve.org/CVERecord?id=CVE-2022-1276}{\texttt{CVE-\/2022-\/1276}}
\item \href{https://www.cve.org/CVERecord?id=CVE-2022-1286}{\texttt{CVE-\/2022-\/1286}}
\item \href{https://www.cve.org/CVERecord?id=CVE-2022-1934}{\texttt{CVE-\/2022-\/1934}} 
\end{DoxyItemize}