\doxysection{jsmn.\+h}
\hypertarget{jsmn_8h_source}{}\label{jsmn_8h_source}\index{managed\_components/espressif\_\_jsmn/include/jsmn.h@{managed\_components/espressif\_\_jsmn/include/jsmn.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{00002\ \textcolor{comment}{\ *\ MIT\ License}}
\DoxyCodeLine{00003\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ *\ Copyright\ (c)\ 2010\ Serge\ Zaitsev}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ *\ Permission\ is\ hereby\ granted,\ free\ of\ charge,\ to\ any\ person\ obtaining\ a\ copy}}
\DoxyCodeLine{00007\ \textcolor{comment}{\ *\ of\ this\ software\ and\ associated\ documentation\ files\ (the\ "{}Software"{}),\ to\ deal}}
\DoxyCodeLine{00008\ \textcolor{comment}{\ *\ in\ the\ Software\ without\ restriction,\ including\ without\ limitation\ the\ rights}}
\DoxyCodeLine{00009\ \textcolor{comment}{\ *\ to\ use,\ copy,\ modify,\ merge,\ publish,\ distribute,\ sublicense,\ and/or\ sell}}
\DoxyCodeLine{00010\ \textcolor{comment}{\ *\ copies\ of\ the\ Software,\ and\ to\ permit\ persons\ to\ whom\ the\ Software\ is}}
\DoxyCodeLine{00011\ \textcolor{comment}{\ *\ furnished\ to\ do\ so,\ subject\ to\ the\ following\ conditions:}}
\DoxyCodeLine{00012\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00013\ \textcolor{comment}{\ *\ The\ above\ copyright\ notice\ and\ this\ permission\ notice\ shall\ be\ included\ in}}
\DoxyCodeLine{00014\ \textcolor{comment}{\ *\ all\ copies\ or\ substantial\ portions\ of\ the\ Software.}}
\DoxyCodeLine{00015\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00016\ \textcolor{comment}{\ *\ THE\ SOFTWARE\ IS\ PROVIDED\ "{}AS\ IS"{},\ WITHOUT\ WARRANTY\ OF\ ANY\ KIND,\ EXPRESS\ OR}}
\DoxyCodeLine{00017\ \textcolor{comment}{\ *\ IMPLIED,\ INCLUDING\ BUT\ NOT\ LIMITED\ TO\ THE\ WARRANTIES\ OF\ MERCHANTABILITY,}}
\DoxyCodeLine{00018\ \textcolor{comment}{\ *\ FITNESS\ FOR\ A\ PARTICULAR\ PURPOSE\ AND\ NONINFRINGEMENT.\ IN\ NO\ EVENT\ SHALL\ THE}}
\DoxyCodeLine{00019\ \textcolor{comment}{\ *\ AUTHORS\ OR\ COPYRIGHT\ HOLDERS\ BE\ LIABLE\ FOR\ ANY\ CLAIM,\ DAMAGES\ OR\ OTHER}}
\DoxyCodeLine{00020\ \textcolor{comment}{\ *\ LIABILITY,\ WHETHER\ IN\ AN\ ACTION\ OF\ CONTRACT,\ TORT\ OR\ OTHERWISE,\ ARISING\ FROM,}}
\DoxyCodeLine{00021\ \textcolor{comment}{\ *\ OUT\ OF\ OR\ IN\ CONNECTION\ WITH\ THE\ SOFTWARE\ OR\ THE\ USE\ OR\ OTHER\ DEALINGS\ IN\ THE}}
\DoxyCodeLine{00022\ \textcolor{comment}{\ *\ SOFTWARE.}}
\DoxyCodeLine{00023\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#ifndef\ JSMN\_H}}
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#define\ JSMN\_H}}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#include\ <stddef.h>}}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \textcolor{preprocessor}{\#ifdef\ \_\_cplusplus}}
\DoxyCodeLine{00030\ \textcolor{keyword}{extern}\ \textcolor{stringliteral}{"{}C"{}}\ \{}
\DoxyCodeLine{00031\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00032\ }
\DoxyCodeLine{00033\ \textcolor{preprocessor}{\#ifdef\ JSMN\_STATIC}}
\DoxyCodeLine{00034\ \textcolor{preprocessor}{\#define\ JSMN\_API\ static}}
\DoxyCodeLine{00035\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00036\ \textcolor{preprocessor}{\#define\ JSMN\_API\ extern}}
\DoxyCodeLine{00037\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00046\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{enum}\ \{}
\DoxyCodeLine{00047\ \ \ \ \ JSMN\_UNDEFINED\ =\ 0,}
\DoxyCodeLine{00048\ \ \ \ \ JSMN\_OBJECT\ =\ 1\ <<\ 0,}
\DoxyCodeLine{00049\ \ \ \ \ JSMN\_ARRAY\ =\ 1\ <<\ 1,}
\DoxyCodeLine{00050\ \ \ \ \ JSMN\_STRING\ =\ 1\ <<\ 2,}
\DoxyCodeLine{00051\ \ \ \ \ JSMN\_PRIMITIVE\ =\ 1\ <<\ 3}
\DoxyCodeLine{00052\ \}\ jsmntype\_t;}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \textcolor{keyword}{enum}\ jsmnerr\ \{}
\DoxyCodeLine{00055\ \ \ \ \ \textcolor{comment}{/*\ Not\ enough\ tokens\ were\ provided\ */}}
\DoxyCodeLine{00056\ \ \ \ \ JSMN\_ERROR\_NOMEM\ =\ -\/1,}
\DoxyCodeLine{00057\ \ \ \ \ \textcolor{comment}{/*\ Invalid\ character\ inside\ JSON\ string\ */}}
\DoxyCodeLine{00058\ \ \ \ \ JSMN\_ERROR\_INVAL\ =\ -\/2,}
\DoxyCodeLine{00059\ \ \ \ \ \textcolor{comment}{/*\ The\ string\ is\ not\ a\ full\ JSON\ packet,\ more\ bytes\ expected\ */}}
\DoxyCodeLine{00060\ \ \ \ \ JSMN\_ERROR\_PART\ =\ -\/3}
\DoxyCodeLine{00061\ \};}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00069\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structjsmntok}{jsmntok}}\ \{}
\DoxyCodeLine{00070\ \ \ \ \ jsmntype\_t\ type;}
\DoxyCodeLine{00071\ \ \ \ \ \textcolor{keywordtype}{int}\ start;}
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{keywordtype}{int}\ end;}
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{keywordtype}{int}\ size;}
\DoxyCodeLine{00074\ \textcolor{preprocessor}{\#ifdef\ JSMN\_PARENT\_LINKS}}
\DoxyCodeLine{00075\ \ \ \ \ \textcolor{keywordtype}{int}\ parent;}
\DoxyCodeLine{00076\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00077\ \}\ jsmntok\_t;}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00083\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structjsmn__parser}{jsmn\_parser}}\ \{}
\DoxyCodeLine{00084\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ pos;\ \ \ \ \ \textcolor{comment}{/*\ offset\ in\ the\ JSON\ string\ */}}
\DoxyCodeLine{00085\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ toknext;\ \textcolor{comment}{/*\ next\ token\ to\ allocate\ */}}
\DoxyCodeLine{00086\ \ \ \ \ \textcolor{keywordtype}{int}\ toksuper;\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ superior\ token\ node,\ e.g.\ parent\ object\ or\ array\ */}}
\DoxyCodeLine{00087\ \}\ \mbox{\hyperlink{structjsmn__parser}{jsmn\_parser}};}
\DoxyCodeLine{00088\ }
\DoxyCodeLine{00092\ JSMN\_API\ \textcolor{keywordtype}{void}\ jsmn\_init(\mbox{\hyperlink{structjsmn__parser}{jsmn\_parser}}\ *parser);}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00099\ JSMN\_API\ \textcolor{keywordtype}{int}\ jsmn\_parse(\mbox{\hyperlink{structjsmn__parser}{jsmn\_parser}}\ *parser,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *js,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ len,}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ jsmntok\_t\ *tokens,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ num\_tokens);}
\DoxyCodeLine{00101\ }
\DoxyCodeLine{00102\ \textcolor{preprocessor}{\#ifndef\ JSMN\_HEADER}\textcolor{preprocessor}{}}
\DoxyCodeLine{00106\ \textcolor{keyword}{static}\ jsmntok\_t\ *jsmn\_alloc\_token(\mbox{\hyperlink{structjsmn__parser}{jsmn\_parser}}\ *parser,\ jsmntok\_t\ *tokens,}
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ num\_tokens)}
\DoxyCodeLine{00108\ \{}
\DoxyCodeLine{00109\ \ \ \ \ jsmntok\_t\ *tok;}
\DoxyCodeLine{00110\ \ \ \ \ \textcolor{keywordflow}{if}\ (parser-\/>toknext\ >=\ num\_tokens)\ \{}
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ NULL;}
\DoxyCodeLine{00112\ \ \ \ \ \}}
\DoxyCodeLine{00113\ \ \ \ \ tok\ =\ \&tokens[parser-\/>toknext++];}
\DoxyCodeLine{00114\ \ \ \ \ tok-\/>start\ =\ tok-\/>end\ =\ -\/1;}
\DoxyCodeLine{00115\ \ \ \ \ tok-\/>size\ =\ 0;}
\DoxyCodeLine{00116\ \textcolor{preprocessor}{\#ifdef\ JSMN\_PARENT\_LINKS}}
\DoxyCodeLine{00117\ \ \ \ \ tok-\/>parent\ =\ -\/1;}
\DoxyCodeLine{00118\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00119\ \ \ \ \ \textcolor{keywordflow}{return}\ tok;}
\DoxyCodeLine{00120\ \}}
\DoxyCodeLine{00121\ }
\DoxyCodeLine{00125\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ jsmn\_fill\_token(jsmntok\_t\ *token,\ \textcolor{keyword}{const}\ jsmntype\_t\ type,}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ start,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ end)}
\DoxyCodeLine{00127\ \{}
\DoxyCodeLine{00128\ \ \ \ \ token-\/>type\ =\ type;}
\DoxyCodeLine{00129\ \ \ \ \ token-\/>start\ =\ start;}
\DoxyCodeLine{00130\ \ \ \ \ token-\/>end\ =\ end;}
\DoxyCodeLine{00131\ \ \ \ \ token-\/>size\ =\ 0;}
\DoxyCodeLine{00132\ \}}
\DoxyCodeLine{00133\ }
\DoxyCodeLine{00137\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ jsmn\_parse\_primitive(\mbox{\hyperlink{structjsmn__parser}{jsmn\_parser}}\ *parser,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *js,}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ len,\ jsmntok\_t\ *tokens,}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ num\_tokens)}
\DoxyCodeLine{00140\ \{}
\DoxyCodeLine{00141\ \ \ \ \ jsmntok\_t\ *token;}
\DoxyCodeLine{00142\ \ \ \ \ \textcolor{keywordtype}{int}\ start;}
\DoxyCodeLine{00143\ }
\DoxyCodeLine{00144\ \ \ \ \ start\ =\ parser-\/>pos;}
\DoxyCodeLine{00145\ }
\DoxyCodeLine{00146\ \ \ \ \ \textcolor{keywordflow}{for}\ (;\ parser-\/>pos\ <\ len\ \&\&\ js[parser-\/>pos]\ !=\ \textcolor{charliteral}{'\(\backslash\)0'};\ parser-\/>pos++)\ \{}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (js[parser-\/>pos])\ \{}
\DoxyCodeLine{00148\ \textcolor{preprocessor}{\#ifndef\ JSMN\_STRICT}}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ In\ strict\ mode\ primitive\ must\ be\ followed\ by\ "{},"{}\ or\ "{}\}"{}\ or\ "{}]"{}\ */}}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{':'}:}
\DoxyCodeLine{00151\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'\(\backslash\)t'}:}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'\(\backslash\)r'}:}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'\(\backslash\)n'}:}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'\ '}:}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{','}:}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{']'}:}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'\}'}:}
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{goto}\ found;}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ to\ quiet\ a\ warning\ from\ gcc*/}}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (js[parser-\/>pos]\ <\ 32\ ||\ js[parser-\/>pos]\ >=\ 127)\ \{}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ \ \ \ \ parser-\/>pos\ =\ start;}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ JSMN\_ERROR\_INVAL;}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00168\ \ \ \ \ \}}
\DoxyCodeLine{00169\ \textcolor{preprocessor}{\#ifdef\ JSMN\_STRICT}}
\DoxyCodeLine{00170\ \ \ \ \ \textcolor{comment}{/*\ In\ strict\ mode\ primitive\ must\ be\ followed\ by\ a\ comma/object/array\ */}}
\DoxyCodeLine{00171\ \ \ \ \ parser-\/>pos\ =\ start;}
\DoxyCodeLine{00172\ \ \ \ \ \textcolor{keywordflow}{return}\ JSMN\_ERROR\_PART;}
\DoxyCodeLine{00173\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00174\ }
\DoxyCodeLine{00175\ found:}
\DoxyCodeLine{00176\ \ \ \ \ \textcolor{keywordflow}{if}\ (tokens\ ==\ NULL)\ \{}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ parser-\/>pos-\/-\/;}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00179\ \ \ \ \ \}}
\DoxyCodeLine{00180\ \ \ \ \ token\ =\ jsmn\_alloc\_token(parser,\ tokens,\ num\_tokens);}
\DoxyCodeLine{00181\ \ \ \ \ \textcolor{keywordflow}{if}\ (token\ ==\ NULL)\ \{}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ parser-\/>pos\ =\ start;}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ JSMN\_ERROR\_NOMEM;}
\DoxyCodeLine{00184\ \ \ \ \ \}}
\DoxyCodeLine{00185\ \ \ \ \ jsmn\_fill\_token(token,\ JSMN\_PRIMITIVE,\ start,\ parser-\/>pos);}
\DoxyCodeLine{00186\ \textcolor{preprocessor}{\#ifdef\ JSMN\_PARENT\_LINKS}}
\DoxyCodeLine{00187\ \ \ \ \ token-\/>parent\ =\ parser-\/>toksuper;}
\DoxyCodeLine{00188\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00189\ \ \ \ \ parser-\/>pos-\/-\/;}
\DoxyCodeLine{00190\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00191\ \}}
\DoxyCodeLine{00192\ }
\DoxyCodeLine{00196\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ jsmn\_parse\_string(\mbox{\hyperlink{structjsmn__parser}{jsmn\_parser}}\ *parser,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *js,}
\DoxyCodeLine{00197\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ len,\ jsmntok\_t\ *tokens,}
\DoxyCodeLine{00198\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ num\_tokens)}
\DoxyCodeLine{00199\ \{}
\DoxyCodeLine{00200\ \ \ \ \ jsmntok\_t\ *token;}
\DoxyCodeLine{00201\ }
\DoxyCodeLine{00202\ \ \ \ \ \textcolor{keywordtype}{int}\ start\ =\ parser-\/>pos;}
\DoxyCodeLine{00203\ }
\DoxyCodeLine{00204\ \ \ \ \ \textcolor{comment}{/*\ Skip\ starting\ quote\ */}}
\DoxyCodeLine{00205\ \ \ \ \ parser-\/>pos++;}
\DoxyCodeLine{00206\ }
\DoxyCodeLine{00207\ \ \ \ \ \textcolor{keywordflow}{for}\ (;\ parser-\/>pos\ <\ len\ \&\&\ js[parser-\/>pos]\ !=\ \textcolor{charliteral}{'\(\backslash\)0'};\ parser-\/>pos++)\ \{}
\DoxyCodeLine{00208\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{char}\ c\ =\ js[parser-\/>pos];}
\DoxyCodeLine{00209\ }
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Quote:\ end\ of\ string\ */}}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (c\ ==\ \textcolor{charliteral}{'\(\backslash\)"{}'})\ \{}
\DoxyCodeLine{00212\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (tokens\ ==\ NULL)\ \{}
\DoxyCodeLine{00213\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00215\ \ \ \ \ \ \ \ \ \ \ \ \ token\ =\ jsmn\_alloc\_token(parser,\ tokens,\ num\_tokens);}
\DoxyCodeLine{00216\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (token\ ==\ NULL)\ \{}
\DoxyCodeLine{00217\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ parser-\/>pos\ =\ start;}
\DoxyCodeLine{00218\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ JSMN\_ERROR\_NOMEM;}
\DoxyCodeLine{00219\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00220\ \ \ \ \ \ \ \ \ \ \ \ \ jsmn\_fill\_token(token,\ JSMN\_STRING,\ start\ +\ 1,\ parser-\/>pos);}
\DoxyCodeLine{00221\ \textcolor{preprocessor}{\#ifdef\ JSMN\_PARENT\_LINKS}}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ \ \ \ \ token-\/>parent\ =\ parser-\/>toksuper;}
\DoxyCodeLine{00223\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00224\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00225\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00226\ }
\DoxyCodeLine{00227\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Backslash:\ Quoted\ symbol\ expected\ */}}
\DoxyCodeLine{00228\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (c\ ==\ \textcolor{charliteral}{'\(\backslash\)\(\backslash\)'}\ \&\&\ parser-\/>pos\ +\ 1\ <\ len)\ \{}
\DoxyCodeLine{00229\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ i;}
\DoxyCodeLine{00230\ \ \ \ \ \ \ \ \ \ \ \ \ parser-\/>pos++;}
\DoxyCodeLine{00231\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (js[parser-\/>pos])\ \{}
\DoxyCodeLine{00232\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Allowed\ escaped\ symbols\ */}}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'\(\backslash\)"{}'}:}
\DoxyCodeLine{00234\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'/'}:}
\DoxyCodeLine{00235\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'\(\backslash\)\(\backslash\)'}:}
\DoxyCodeLine{00236\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'b'}:}
\DoxyCodeLine{00237\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'f'}:}
\DoxyCodeLine{00238\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'r'}:}
\DoxyCodeLine{00239\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'n'}:}
\DoxyCodeLine{00240\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'t'}:}
\DoxyCodeLine{00241\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00242\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Allows\ escaped\ symbol\ \(\backslash\)uXXXX\ */}}
\DoxyCodeLine{00243\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'u'}:}
\DoxyCodeLine{00244\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ parser-\/>pos++;}
\DoxyCodeLine{00245\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ 4\ \&\&\ parser-\/>pos\ <\ len\ \&\&\ js[parser-\/>pos]\ !=\ \textcolor{charliteral}{'\(\backslash\)0'};}
\DoxyCodeLine{00246\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ i++)\ \{}
\DoxyCodeLine{00247\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ If\ it\ isn't\ a\ hex\ character\ we\ have\ an\ error\ */}}
\DoxyCodeLine{00248\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!((js[parser-\/>pos]\ >=\ 48\ \&\&\ js[parser-\/>pos]\ <=\ 57)\ ||\ \ \ \textcolor{comment}{/*\ 0-\/9\ */}}
\DoxyCodeLine{00249\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (js[parser-\/>pos]\ >=\ 65\ \&\&\ js[parser-\/>pos]\ <=\ 70)\ ||\ \ \ \textcolor{comment}{/*\ A-\/F\ */}}
\DoxyCodeLine{00250\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (js[parser-\/>pos]\ >=\ 97\ \&\&\ js[parser-\/>pos]\ <=\ 102)))\ \{\ \textcolor{comment}{/*\ a-\/f\ */}}
\DoxyCodeLine{00251\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ parser-\/>pos\ =\ start;}
\DoxyCodeLine{00252\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ JSMN\_ERROR\_INVAL;}
\DoxyCodeLine{00253\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00254\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ parser-\/>pos++;}
\DoxyCodeLine{00255\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00256\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ parser-\/>pos-\/-\/;}
\DoxyCodeLine{00257\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00258\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Unexpected\ symbol\ */}}
\DoxyCodeLine{00259\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ parser-\/>pos\ =\ start;}
\DoxyCodeLine{00261\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ JSMN\_ERROR\_INVAL;}
\DoxyCodeLine{00262\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00263\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00264\ \ \ \ \ \}}
\DoxyCodeLine{00265\ \ \ \ \ parser-\/>pos\ =\ start;}
\DoxyCodeLine{00266\ \ \ \ \ \textcolor{keywordflow}{return}\ JSMN\_ERROR\_PART;}
\DoxyCodeLine{00267\ \}}
\DoxyCodeLine{00268\ }
\DoxyCodeLine{00272\ JSMN\_API\ \textcolor{keywordtype}{int}\ jsmn\_parse(\mbox{\hyperlink{structjsmn__parser}{jsmn\_parser}}\ *parser,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *js,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ len,}
\DoxyCodeLine{00273\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ jsmntok\_t\ *tokens,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ num\_tokens)}
\DoxyCodeLine{00274\ \{}
\DoxyCodeLine{00275\ \ \ \ \ \textcolor{keywordtype}{int}\ r;}
\DoxyCodeLine{00276\ \ \ \ \ \textcolor{keywordtype}{int}\ i;}
\DoxyCodeLine{00277\ \ \ \ \ jsmntok\_t\ *token;}
\DoxyCodeLine{00278\ \ \ \ \ \textcolor{keywordtype}{int}\ count\ =\ parser-\/>toknext;}
\DoxyCodeLine{00279\ }
\DoxyCodeLine{00280\ \ \ \ \ \textcolor{keywordflow}{for}\ (;\ parser-\/>pos\ <\ len\ \&\&\ js[parser-\/>pos]\ !=\ \textcolor{charliteral}{'\(\backslash\)0'};\ parser-\/>pos++)\ \{}
\DoxyCodeLine{00281\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{char}\ c;}
\DoxyCodeLine{00282\ \ \ \ \ \ \ \ \ jsmntype\_t\ type;}
\DoxyCodeLine{00283\ }
\DoxyCodeLine{00284\ \ \ \ \ \ \ \ \ c\ =\ js[parser-\/>pos];}
\DoxyCodeLine{00285\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (c)\ \{}
\DoxyCodeLine{00286\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'\{'}:}
\DoxyCodeLine{00287\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'['}:}
\DoxyCodeLine{00288\ \ \ \ \ \ \ \ \ \ \ \ \ count++;}
\DoxyCodeLine{00289\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (tokens\ ==\ NULL)\ \{}
\DoxyCodeLine{00290\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00291\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00292\ \ \ \ \ \ \ \ \ \ \ \ \ token\ =\ jsmn\_alloc\_token(parser,\ tokens,\ num\_tokens);}
\DoxyCodeLine{00293\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (token\ ==\ NULL)\ \{}
\DoxyCodeLine{00294\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ JSMN\_ERROR\_NOMEM;}
\DoxyCodeLine{00295\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00296\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (parser-\/>toksuper\ !=\ -\/1)\ \{}
\DoxyCodeLine{00297\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ jsmntok\_t\ *t\ =\ \&tokens[parser-\/>toksuper];}
\DoxyCodeLine{00298\ \textcolor{preprocessor}{\#ifdef\ JSMN\_STRICT}}
\DoxyCodeLine{00299\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ In\ strict\ mode\ an\ object\ or\ array\ can't\ become\ a\ key\ */}}
\DoxyCodeLine{00300\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (t-\/>type\ ==\ JSMN\_OBJECT)\ \{}
\DoxyCodeLine{00301\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ JSMN\_ERROR\_INVAL;}
\DoxyCodeLine{00302\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00303\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00304\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ t-\/>size++;}
\DoxyCodeLine{00305\ \textcolor{preprocessor}{\#ifdef\ JSMN\_PARENT\_LINKS}}
\DoxyCodeLine{00306\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ token-\/>parent\ =\ parser-\/>toksuper;}
\DoxyCodeLine{00307\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00308\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00309\ \ \ \ \ \ \ \ \ \ \ \ \ token-\/>type\ =\ (c\ ==\ \textcolor{charliteral}{'\{'}\ ?\ JSMN\_OBJECT\ :\ JSMN\_ARRAY);}
\DoxyCodeLine{00310\ \ \ \ \ \ \ \ \ \ \ \ \ token-\/>start\ =\ parser-\/>pos;}
\DoxyCodeLine{00311\ \ \ \ \ \ \ \ \ \ \ \ \ parser-\/>toksuper\ =\ parser-\/>toknext\ -\/\ 1;}
\DoxyCodeLine{00312\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00313\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'\}'}:}
\DoxyCodeLine{00314\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{']'}:}
\DoxyCodeLine{00315\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (tokens\ ==\ NULL)\ \{}
\DoxyCodeLine{00316\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00317\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00318\ \ \ \ \ \ \ \ \ \ \ \ \ type\ =\ (c\ ==\ \textcolor{charliteral}{'\}'}\ ?\ JSMN\_OBJECT\ :\ JSMN\_ARRAY);}
\DoxyCodeLine{00319\ \textcolor{preprocessor}{\#ifdef\ JSMN\_PARENT\_LINKS}}
\DoxyCodeLine{00320\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (parser-\/>toknext\ <\ 1)\ \{}
\DoxyCodeLine{00321\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ JSMN\_ERROR\_INVAL;}
\DoxyCodeLine{00322\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00323\ \ \ \ \ \ \ \ \ \ \ \ \ token\ =\ \&tokens[parser-\/>toknext\ -\/\ 1];}
\DoxyCodeLine{00324\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (;;)\ \{}
\DoxyCodeLine{00325\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (token-\/>start\ !=\ -\/1\ \&\&\ token-\/>end\ ==\ -\/1)\ \{}
\DoxyCodeLine{00326\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (token-\/>type\ !=\ type)\ \{}
\DoxyCodeLine{00327\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ JSMN\_ERROR\_INVAL;}
\DoxyCodeLine{00328\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00329\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ token-\/>end\ =\ parser-\/>pos\ +\ 1;}
\DoxyCodeLine{00330\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ parser-\/>toksuper\ =\ token-\/>parent;}
\DoxyCodeLine{00331\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00332\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00333\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (token-\/>parent\ ==\ -\/1)\ \{}
\DoxyCodeLine{00334\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (token-\/>type\ !=\ type\ ||\ parser-\/>toksuper\ ==\ -\/1)\ \{}
\DoxyCodeLine{00335\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ JSMN\_ERROR\_INVAL;}
\DoxyCodeLine{00336\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00337\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00338\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00339\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ token\ =\ \&tokens[token-\/>parent];}
\DoxyCodeLine{00340\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00341\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00342\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ parser-\/>toknext\ -\/\ 1;\ i\ >=\ 0;\ i-\/-\/)\ \{}
\DoxyCodeLine{00343\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ token\ =\ \&tokens[i];}
\DoxyCodeLine{00344\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (token-\/>start\ !=\ -\/1\ \&\&\ token-\/>end\ ==\ -\/1)\ \{}
\DoxyCodeLine{00345\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (token-\/>type\ !=\ type)\ \{}
\DoxyCodeLine{00346\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ JSMN\_ERROR\_INVAL;}
\DoxyCodeLine{00347\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00348\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ parser-\/>toksuper\ =\ -\/1;}
\DoxyCodeLine{00349\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ token-\/>end\ =\ parser-\/>pos\ +\ 1;}
\DoxyCodeLine{00350\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00351\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00352\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00353\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Error\ if\ unmatched\ closing\ bracket\ */}}
\DoxyCodeLine{00354\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (i\ ==\ -\/1)\ \{}
\DoxyCodeLine{00355\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ JSMN\_ERROR\_INVAL;}
\DoxyCodeLine{00356\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00357\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (;\ i\ >=\ 0;\ i-\/-\/)\ \{}
\DoxyCodeLine{00358\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ token\ =\ \&tokens[i];}
\DoxyCodeLine{00359\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (token-\/>start\ !=\ -\/1\ \&\&\ token-\/>end\ ==\ -\/1)\ \{}
\DoxyCodeLine{00360\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ parser-\/>toksuper\ =\ i;}
\DoxyCodeLine{00361\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00362\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00363\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00364\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00365\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00366\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'\(\backslash\)"{}'}:}
\DoxyCodeLine{00367\ \ \ \ \ \ \ \ \ \ \ \ \ r\ =\ jsmn\_parse\_string(parser,\ js,\ len,\ tokens,\ num\_tokens);}
\DoxyCodeLine{00368\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (r\ <\ 0)\ \{}
\DoxyCodeLine{00369\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ r;}
\DoxyCodeLine{00370\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00371\ \ \ \ \ \ \ \ \ \ \ \ \ count++;}
\DoxyCodeLine{00372\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (parser-\/>toksuper\ !=\ -\/1\ \&\&\ tokens\ !=\ NULL)\ \{}
\DoxyCodeLine{00373\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tokens[parser-\/>toksuper].size++;}
\DoxyCodeLine{00374\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00375\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00376\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'\(\backslash\)t'}:}
\DoxyCodeLine{00377\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'\(\backslash\)r'}:}
\DoxyCodeLine{00378\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'\(\backslash\)n'}:}
\DoxyCodeLine{00379\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'\ '}:}
\DoxyCodeLine{00380\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00381\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{':'}:}
\DoxyCodeLine{00382\ \ \ \ \ \ \ \ \ \ \ \ \ parser-\/>toksuper\ =\ parser-\/>toknext\ -\/\ 1;}
\DoxyCodeLine{00383\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00384\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{','}:}
\DoxyCodeLine{00385\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (tokens\ !=\ NULL\ \&\&\ parser-\/>toksuper\ !=\ -\/1\ \&\&}
\DoxyCodeLine{00386\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tokens[parser-\/>toksuper].type\ !=\ JSMN\_ARRAY\ \&\&}
\DoxyCodeLine{00387\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tokens[parser-\/>toksuper].type\ !=\ JSMN\_OBJECT)\ \{}
\DoxyCodeLine{00388\ \textcolor{preprocessor}{\#ifdef\ JSMN\_PARENT\_LINKS}}
\DoxyCodeLine{00389\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ parser-\/>toksuper\ =\ tokens[parser-\/>toksuper].parent;}
\DoxyCodeLine{00390\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00391\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ parser-\/>toknext\ -\/\ 1;\ i\ >=\ 0;\ i-\/-\/)\ \{}
\DoxyCodeLine{00392\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (tokens[i].type\ ==\ JSMN\_ARRAY\ ||\ tokens[i].type\ ==\ JSMN\_OBJECT)\ \{}
\DoxyCodeLine{00393\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (tokens[i].start\ !=\ -\/1\ \&\&\ tokens[i].end\ ==\ -\/1)\ \{}
\DoxyCodeLine{00394\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ parser-\/>toksuper\ =\ i;}
\DoxyCodeLine{00395\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00396\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00397\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00398\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00399\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00400\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00401\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00402\ \textcolor{preprocessor}{\#ifdef\ JSMN\_STRICT}}
\DoxyCodeLine{00403\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ In\ strict\ mode\ primitives\ are:\ numbers\ and\ booleans\ */}}
\DoxyCodeLine{00404\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'-\/'}:}
\DoxyCodeLine{00405\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'0'}:}
\DoxyCodeLine{00406\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'1'}:}
\DoxyCodeLine{00407\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'2'}:}
\DoxyCodeLine{00408\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'3'}:}
\DoxyCodeLine{00409\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'4'}:}
\DoxyCodeLine{00410\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'5'}:}
\DoxyCodeLine{00411\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'6'}:}
\DoxyCodeLine{00412\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'7'}:}
\DoxyCodeLine{00413\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'8'}:}
\DoxyCodeLine{00414\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'9'}:}
\DoxyCodeLine{00415\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'t'}:}
\DoxyCodeLine{00416\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'f'}:}
\DoxyCodeLine{00417\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'n'}:}
\DoxyCodeLine{00418\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ And\ they\ must\ not\ be\ keys\ of\ the\ object\ */}}
\DoxyCodeLine{00419\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (tokens\ !=\ NULL\ \&\&\ parser-\/>toksuper\ !=\ -\/1)\ \{}
\DoxyCodeLine{00420\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ jsmntok\_t\ *t\ =\ \&tokens[parser-\/>toksuper];}
\DoxyCodeLine{00421\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (t-\/>type\ ==\ JSMN\_OBJECT\ ||}
\DoxyCodeLine{00422\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (t-\/>type\ ==\ JSMN\_STRING\ \&\&\ t-\/>size\ !=\ 0))\ \{}
\DoxyCodeLine{00423\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ JSMN\_ERROR\_INVAL;}
\DoxyCodeLine{00424\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00425\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00426\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00427\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ In\ non-\/strict\ mode\ every\ unquoted\ value\ is\ a\ primitive\ */}}
\DoxyCodeLine{00428\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00429\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00430\ \ \ \ \ \ \ \ \ \ \ \ \ r\ =\ jsmn\_parse\_primitive(parser,\ js,\ len,\ tokens,\ num\_tokens);}
\DoxyCodeLine{00431\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (r\ <\ 0)\ \{}
\DoxyCodeLine{00432\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ r;}
\DoxyCodeLine{00433\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00434\ \ \ \ \ \ \ \ \ \ \ \ \ count++;}
\DoxyCodeLine{00435\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (parser-\/>toksuper\ !=\ -\/1\ \&\&\ tokens\ !=\ NULL)\ \{}
\DoxyCodeLine{00436\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tokens[parser-\/>toksuper].size++;}
\DoxyCodeLine{00437\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00438\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00439\ }
\DoxyCodeLine{00440\ \textcolor{preprocessor}{\#ifdef\ JSMN\_STRICT}}
\DoxyCodeLine{00441\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Unexpected\ char\ in\ strict\ mode\ */}}
\DoxyCodeLine{00442\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00443\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ JSMN\_ERROR\_INVAL;}
\DoxyCodeLine{00444\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00445\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00446\ \ \ \ \ \}}
\DoxyCodeLine{00447\ }
\DoxyCodeLine{00448\ \ \ \ \ \textcolor{keywordflow}{if}\ (tokens\ !=\ NULL)\ \{}
\DoxyCodeLine{00449\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ parser-\/>toknext\ -\/\ 1;\ i\ >=\ 0;\ i-\/-\/)\ \{}
\DoxyCodeLine{00450\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Unmatched\ opened\ object\ or\ array\ */}}
\DoxyCodeLine{00451\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (tokens[i].start\ !=\ -\/1\ \&\&\ tokens[i].end\ ==\ -\/1)\ \{}
\DoxyCodeLine{00452\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ JSMN\_ERROR\_PART;}
\DoxyCodeLine{00453\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00454\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00455\ \ \ \ \ \}}
\DoxyCodeLine{00456\ }
\DoxyCodeLine{00457\ \ \ \ \ \textcolor{keywordflow}{return}\ count;}
\DoxyCodeLine{00458\ \}}
\DoxyCodeLine{00459\ }
\DoxyCodeLine{00464\ JSMN\_API\ \textcolor{keywordtype}{void}\ jsmn\_init(\mbox{\hyperlink{structjsmn__parser}{jsmn\_parser}}\ *parser)}
\DoxyCodeLine{00465\ \{}
\DoxyCodeLine{00466\ \ \ \ \ parser-\/>pos\ =\ 0;}
\DoxyCodeLine{00467\ \ \ \ \ parser-\/>toknext\ =\ 0;}
\DoxyCodeLine{00468\ \ \ \ \ parser-\/>toksuper\ =\ -\/1;}
\DoxyCodeLine{00469\ \}}
\DoxyCodeLine{00470\ }
\DoxyCodeLine{00471\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ JSMN\_HEADER\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00472\ }
\DoxyCodeLine{00473\ \textcolor{preprocessor}{\#ifdef\ \_\_cplusplus}}
\DoxyCodeLine{00474\ \}}
\DoxyCodeLine{00475\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00476\ }
\DoxyCodeLine{00477\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ JSMN\_H\ */}\textcolor{preprocessor}{}}

\end{DoxyCode}
