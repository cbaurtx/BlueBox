\chapter{Symbols }
\hypertarget{md_managed__components_2espressif____nghttp_2nghttp2_2third-party_2mruby_2doc_2guides_2symbol}{}\label{md_managed__components_2espressif____nghttp_2nghttp2_2third-party_2mruby_2doc_2guides_2symbol}\index{Symbols@{Symbols}}
\label{md_managed__components_2espressif____nghttp_2nghttp2_2third-party_2mruby_2doc_2guides_2symbol_autotoc_md381}%
\Hypertarget{md_managed__components_2espressif____nghttp_2nghttp2_2third-party_2mruby_2doc_2guides_2symbol_autotoc_md381}%


Symbols in {\ttfamily mruby} C source code is represented by {\ttfamily \doxylink{classmrb__sym}{mrb\+\_\+sym}} which is alias of {\ttfamily uint32\+\_\+t}. Lower 30 bits are used for symbols so that higher 2 bits can be used as flags, e.\+g. {\ttfamily struct mt\+\_\+elem} in {\ttfamily class.\+c}.


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{struct\ }mt\_elem\ \{}
\DoxyCodeLine{\ \ \textcolor{keyword}{union\ }mt\_ptr\ ptr;}
\DoxyCodeLine{\ \ \textcolor{keywordtype}{size\_t}\ func\_p:1;}
\DoxyCodeLine{\ \ \textcolor{keywordtype}{size\_t}\ noarg\_p:1;}
\DoxyCodeLine{\ \ mrb\_sym\ key:\textcolor{keyword}{sizeof}(mrb\_sym)*8-\/2;}
\DoxyCodeLine{\};}

\end{DoxyCode}
\hypertarget{md_managed__components_2espressif____nghttp_2nghttp2_2third-party_2mruby_2doc_2guides_2symbol_autotoc_md382}{}\doxysection{\texorpdfstring{C API}{C API}}\label{md_managed__components_2espressif____nghttp_2nghttp2_2third-party_2mruby_2doc_2guides_2symbol_autotoc_md382}
We provide following C API for symbols.\hypertarget{md_managed__components_2espressif____nghttp_2nghttp2_2third-party_2mruby_2doc_2guides_2symbol_autotoc_md383}{}\doxysubsection{\texorpdfstring{Generate Symbols}{Generate Symbols}}\label{md_managed__components_2espressif____nghttp_2nghttp2_2third-party_2mruby_2doc_2guides_2symbol_autotoc_md383}
\hypertarget{md_managed__components_2espressif____nghttp_2nghttp2_2third-party_2mruby_2doc_2guides_2symbol_autotoc_md384}{}\doxysubsubsection{\texorpdfstring{{\ttfamily mrb\+\_\+sym mrb\+\_\+intern(mrb\+\_\+state\texorpdfstring{$\ast$}{*},const char\texorpdfstring{$\ast$}{*},size\+\_\+t)}}{{\ttfamily mrb\+\_\+sym mrb\+\_\+intern(mrb\+\_\+state\texorpdfstring{$\ast$}{*},const char\texorpdfstring{$\ast$}{*},size\+\_\+t)}}}\label{md_managed__components_2espressif____nghttp_2nghttp2_2third-party_2mruby_2doc_2guides_2symbol_autotoc_md384}
Get a symbol from a string.\hypertarget{md_managed__components_2espressif____nghttp_2nghttp2_2third-party_2mruby_2doc_2guides_2symbol_autotoc_md385}{}\doxysubsubsection{\texorpdfstring{{\ttfamily mrb\+\_\+sym mrb\+\_\+intern\+\_\+check\+\_\+cstr(mrb\+\_\+state\texorpdfstring{$\ast$}{*},const char\texorpdfstring{$\ast$}{*})}}{{\ttfamily mrb\+\_\+sym mrb\+\_\+intern\+\_\+check\+\_\+cstr(mrb\+\_\+state\texorpdfstring{$\ast$}{*},const char\texorpdfstring{$\ast$}{*})}}}\label{md_managed__components_2espressif____nghttp_2nghttp2_2third-party_2mruby_2doc_2guides_2symbol_autotoc_md385}
Get a symbol from a NULL terminated (C) string.\hypertarget{md_managed__components_2espressif____nghttp_2nghttp2_2third-party_2mruby_2doc_2guides_2symbol_autotoc_md386}{}\doxysubsubsection{\texorpdfstring{{\ttfamily mrb\+\_\+sym mrb\+\_\+intern\+\_\+str(mrb\+\_\+state\texorpdfstring{$\ast$}{*},mrb\+\_\+value)}}{{\ttfamily mrb\+\_\+sym mrb\+\_\+intern\+\_\+str(mrb\+\_\+state\texorpdfstring{$\ast$}{*},mrb\+\_\+value)}}}\label{md_managed__components_2espressif____nghttp_2nghttp2_2third-party_2mruby_2doc_2guides_2symbol_autotoc_md386}
Get a symbol from a Ruby string object.\hypertarget{md_managed__components_2espressif____nghttp_2nghttp2_2third-party_2mruby_2doc_2guides_2symbol_autotoc_md387}{}\doxysubsubsection{\texorpdfstring{{\ttfamily mrb\+\_\+intern\+\_\+lit(mrb\+\_\+state\texorpdfstring{$\ast$}{*},const char\texorpdfstring{$\ast$}{*})}}{{\ttfamily mrb\+\_\+intern\+\_\+lit(mrb\+\_\+state\texorpdfstring{$\ast$}{*},const char\texorpdfstring{$\ast$}{*})}}}\label{md_managed__components_2espressif____nghttp_2nghttp2_2third-party_2mruby_2doc_2guides_2symbol_autotoc_md387}
Get a symbol from a C string literal. The second argument should be a C string literal, otherwise you will get a compilation error. It does not copy C string given the fact it\textquotesingle{}s a literal.\hypertarget{md_managed__components_2espressif____nghttp_2nghttp2_2third-party_2mruby_2doc_2guides_2symbol_autotoc_md388}{}\doxysubsubsection{\texorpdfstring{{\ttfamily mrb\+\_\+sym mrb\+\_\+intern\+\_\+check(mrb\+\_\+state\texorpdfstring{$\ast$}{*},const char\texorpdfstring{$\ast$}{*},size\+\_\+t)}}{{\ttfamily mrb\+\_\+sym mrb\+\_\+intern\+\_\+check(mrb\+\_\+state\texorpdfstring{$\ast$}{*},const char\texorpdfstring{$\ast$}{*},size\+\_\+t)}}}\label{md_managed__components_2espressif____nghttp_2nghttp2_2third-party_2mruby_2doc_2guides_2symbol_autotoc_md388}
Get a symbol from a string if the string has been already registered as a symbol, otherwise return {\ttfamily 0}. We also provide variants {\ttfamily mrb\+\_\+intern\+\_\+check\+\_\+str()} (from Ruby string) and {\ttfamily mrb\+\_\+intern\+\_\+check\+\_\+cstr()} (from C string).\hypertarget{md_managed__components_2espressif____nghttp_2nghttp2_2third-party_2mruby_2doc_2guides_2symbol_autotoc_md389}{}\doxysubsubsection{\texorpdfstring{{\ttfamily const char \texorpdfstring{$\ast$}{*}mrb\+\_\+sym\+\_\+name(mrb\+\_\+state\texorpdfstring{$\ast$}{*},mrb\+\_\+sym)}}{{\ttfamily const char \texorpdfstring{$\ast$}{*}mrb\+\_\+sym\+\_\+name(mrb\+\_\+state\texorpdfstring{$\ast$}{*},mrb\+\_\+sym)}}}\label{md_managed__components_2espressif____nghttp_2nghttp2_2third-party_2mruby_2doc_2guides_2symbol_autotoc_md389}
Get a string representation of a symbol as a C string.\hypertarget{md_managed__components_2espressif____nghttp_2nghttp2_2third-party_2mruby_2doc_2guides_2symbol_autotoc_md390}{}\doxysubsubsection{\texorpdfstring{{\ttfamily const char \texorpdfstring{$\ast$}{*}mrb\+\_\+sym\+\_\+name\+\_\+len(mrb\+\_\+state\texorpdfstring{$\ast$}{*},mrb\+\_\+sym,mrb\+\_\+int\texorpdfstring{$\ast$}{*})}}{{\ttfamily const char \texorpdfstring{$\ast$}{*}mrb\+\_\+sym\+\_\+name\+\_\+len(mrb\+\_\+state\texorpdfstring{$\ast$}{*},mrb\+\_\+sym,mrb\+\_\+int\texorpdfstring{$\ast$}{*})}}}\label{md_managed__components_2espressif____nghttp_2nghttp2_2third-party_2mruby_2doc_2guides_2symbol_autotoc_md390}
Get a string representation of a symbol, and its length.\hypertarget{md_managed__components_2espressif____nghttp_2nghttp2_2third-party_2mruby_2doc_2guides_2symbol_autotoc_md391}{}\doxysection{\texorpdfstring{Preallocate Symbols}{Preallocate Symbols}}\label{md_managed__components_2espressif____nghttp_2nghttp2_2third-party_2mruby_2doc_2guides_2symbol_autotoc_md391}
To save RAM, {\ttfamily mruby} can use compile-\/time allocation of some symbols. You can use following macros to get preallocated symbols by including {\ttfamily \doxylink{presym_8h}{mruby/presym.\+h}} header.


\begin{DoxyItemize}
\item {\ttfamily MRB\+\_\+\+SYM(xor)} //=\texorpdfstring{$>$}{>} xor (Word characters)
\item {\ttfamily MRB\+\_\+\+SYM\+\_\+\+B(xor)} //=\texorpdfstring{$>$}{>} xor! (Method with Bang)
\item {\ttfamily MRB\+\_\+\+SYM\+\_\+\+Q(xor)} //=\texorpdfstring{$>$}{>} xor? (Method with Question mark)
\item {\ttfamily MRB\+\_\+\+SYM\+\_\+\+E(xor)} //=\texorpdfstring{$>$}{>} xor= (Method with Equal)
\item {\ttfamily MRB\+\_\+\+CVSYM(xor)} //=\texorpdfstring{$>$}{>} @xor (Class Variable)
\item {\ttfamily MRB\+\_\+\+IVSYM(xor)} //=\texorpdfstring{$>$}{>} @xor (Instance Variable)
\item {\ttfamily MRB\+\_\+\+OPSYM(xor)} //=\texorpdfstring{$>$}{>} \texorpdfstring{$^\wedge$}{\string^} (Operator)
\end{DoxyItemize}

For {\ttfamily MRB\+\_\+\+OPSYM()}, specify the names corresponding to operators (see {\ttfamily MRuby\+::\+Presym\+::\+OPERATORS} in {\ttfamily lib/mruby/presym.\+rb} for the names that can be specified for it). Other than that, describe only word characters excluding leading and ending punctuations.

These macros are converted to static symbol IDs at compile time, unless preallocate symbols are disabled by {\ttfamily conf.\+disable\+\_\+presym}. In that case, these macros are expanded to {\ttfamily mrb\+\_\+intern\+\_\+lit} calls, therefore the mruby state variable is required. The above macros assume the variable name is {\ttfamily mrb}. If its name is not {\ttfamily mrb}, you need to use macros with {\ttfamily \+\_\+2} suffix, such as {\ttfamily MRB\+\_\+\+SYM\+\_\+2} to specify {\ttfamily mrb\+\_\+state\texorpdfstring{$\ast$}{*}} variable.\hypertarget{md_managed__components_2espressif____nghttp_2nghttp2_2third-party_2mruby_2doc_2guides_2symbol_autotoc_md392}{}\doxysubsection{\texorpdfstring{Disabling Preallocated Symbols}{Disabling Preallocated Symbols}}\label{md_managed__components_2espressif____nghttp_2nghttp2_2third-party_2mruby_2doc_2guides_2symbol_autotoc_md392}
You can disable preallocated symbols by specifying {\ttfamily conf.\+disable\+\_\+presym} in the configuration file. 