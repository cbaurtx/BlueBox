\doxysection{data.\+h}
\hypertarget{data_8h_source}{}\label{data_8h_source}\index{managed\_components/espressif\_\_nghttp/nghttp2/third-\/party/mruby/include/mruby/data.h@{managed\_components/espressif\_\_nghttp/nghttp2/third-\/party/mruby/include/mruby/data.h}}
\mbox{\hyperlink{data_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00006\ }
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#ifndef\ MRUBY\_DATA\_H}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#define\ MRUBY\_DATA\_H}}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{common_8h}{common.h}}"{}}}
\DoxyCodeLine{00011\ }
\DoxyCodeLine{00017\ \mbox{\hyperlink{common_8h_a97677ac769c7bdd7f18d40d387f36553}{MRB\_BEGIN\_DECL}}}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00022\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structmrb__data__type}{mrb\_data\_type}}\ \{}
\DoxyCodeLine{00024\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *\mbox{\hyperlink{structmrb__data__type_a53ba50686e2a28e8e36fb06c9620316f}{struct\_name}};}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00027\ \ \ void\ (*\mbox{\hyperlink{structmrb__data__type_ab3bcc6452eed9e4ebb914df7c06b2304}{dfree}})(\mbox{\hyperlink{structmrb__state}{mrb\_state}}\ *mrb,\ \textcolor{keywordtype}{void}*);}
\DoxyCodeLine{00028\ \}\ \mbox{\hyperlink{structmrb__data__type}{mrb\_data\_type}};}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structRData}{RData}}\ \{}
\DoxyCodeLine{00031\ \ \ MRB\_OBJECT\_HEADER;}
\DoxyCodeLine{00032\ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structiv__tbl}{iv\_tbl}}\ *iv;}
\DoxyCodeLine{00033\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structmrb__data__type}{mrb\_data\_type}}\ *type;}
\DoxyCodeLine{00034\ \ \ \textcolor{keywordtype}{void}\ *data;}
\DoxyCodeLine{00035\ \};}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ \mbox{\hyperlink{common_8h_ab33860705c91ca5736335f59d007845c}{MRB\_API}}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structRData}{RData}}\ *mrb\_data\_object\_alloc(\mbox{\hyperlink{structmrb__state}{mrb\_state}}\ *mrb,\ \textcolor{keyword}{struct}\ \mbox{\hyperlink{structRClass}{RClass}}*\ klass,\ \textcolor{keywordtype}{void}\ *datap,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structmrb__data__type}{mrb\_data\_type}}\ *type);}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \textcolor{preprocessor}{\#define\ Data\_Wrap\_Struct(mrb,klass,type,ptr)\(\backslash\)}}
\DoxyCodeLine{00040\ \textcolor{preprocessor}{\ \ mrb\_data\_object\_alloc(mrb,klass,ptr,type)}}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \textcolor{preprocessor}{\#define\ Data\_Make\_Struct(mrb,klass,strct,type,sval,data\_obj)\ do\ \{\ \(\backslash\)}}
\DoxyCodeLine{00043\ \textcolor{preprocessor}{\ \ (data\_obj)\ =\ Data\_Wrap\_Struct(mrb,klass,type,NULL);\(\backslash\)}}
\DoxyCodeLine{00044\ \textcolor{preprocessor}{\ \ (sval)\ =\ (strct*)mrb\_malloc(mrb,\ sizeof(strct));\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00045\ \textcolor{preprocessor}{\ \ \{\ static\ const\ strct\ zero\ =\ \{\ 0\ \};\ *(sval)\ =\ zero;\ \};\(\backslash\)}}
\DoxyCodeLine{00046\ \textcolor{preprocessor}{\ \ (data\_obj)-\/>data\ =\ (sval);\(\backslash\)}}
\DoxyCodeLine{00047\ \textcolor{preprocessor}{\}\ while\ (0)}}
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00049\ \textcolor{preprocessor}{\#define\ RDATA(obj)\ \ \ \ \ \ \ \ \ ((struct\ RData*)(mrb\_ptr(obj)))}}
\DoxyCodeLine{00050\ \textcolor{preprocessor}{\#define\ DATA\_PTR(d)\ \ \ \ \ \ \ \ (RDATA(d)-\/>data)}}
\DoxyCodeLine{00051\ \textcolor{preprocessor}{\#define\ DATA\_TYPE(d)\ \ \ \ \ \ \ (RDATA(d)-\/>type)}}
\DoxyCodeLine{00052\ \mbox{\hyperlink{common_8h_ab33860705c91ca5736335f59d007845c}{MRB\_API}}\ \textcolor{keywordtype}{void}\ mrb\_data\_check\_type(\mbox{\hyperlink{structmrb__state}{mrb\_state}}\ *mrb,\ \mbox{\hyperlink{structmrb__value}{mrb\_value}},\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structmrb__data__type}{mrb\_data\_type}}*);}
\DoxyCodeLine{00053\ \mbox{\hyperlink{common_8h_ab33860705c91ca5736335f59d007845c}{MRB\_API}}\ \textcolor{keywordtype}{void}\ *mrb\_data\_get\_ptr(\mbox{\hyperlink{structmrb__state}{mrb\_state}}\ *mrb,\ \mbox{\hyperlink{structmrb__value}{mrb\_value}},\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structmrb__data__type}{mrb\_data\_type}}*);}
\DoxyCodeLine{00054\ \textcolor{preprocessor}{\#define\ DATA\_GET\_PTR(mrb,obj,dtype,type)\ (type*)mrb\_data\_get\_ptr(mrb,obj,dtype)}}
\DoxyCodeLine{00055\ \mbox{\hyperlink{common_8h_ab33860705c91ca5736335f59d007845c}{MRB\_API}}\ \textcolor{keywordtype}{void}\ *mrb\_data\_check\_get\_ptr(\mbox{\hyperlink{structmrb__state}{mrb\_state}}\ *mrb,\ \mbox{\hyperlink{structmrb__value}{mrb\_value}},\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structmrb__data__type}{mrb\_data\_type}}*);}
\DoxyCodeLine{00056\ \textcolor{preprocessor}{\#define\ DATA\_CHECK\_GET\_PTR(mrb,obj,dtype,type)\ (type*)mrb\_data\_check\_get\_ptr(mrb,obj,dtype)}}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ \textcolor{comment}{/*\ obsolete\ functions\ and\ macros\ */}}
\DoxyCodeLine{00059\ \textcolor{preprocessor}{\#define\ mrb\_data\_check\_and\_get(mrb,obj,dtype)\ mrb\_data\_get\_ptr(mrb,obj,dtype)}}
\DoxyCodeLine{00060\ \textcolor{preprocessor}{\#define\ mrb\_get\_datatype(mrb,val,type)\ mrb\_data\_get\_ptr(mrb,\ val,\ type)}}
\DoxyCodeLine{00061\ \textcolor{preprocessor}{\#define\ mrb\_check\_datatype(mrb,val,type)\ mrb\_data\_get\_ptr(mrb,\ val,\ type)}}
\DoxyCodeLine{00062\ \textcolor{preprocessor}{\#define\ Data\_Get\_Struct(mrb,obj,type,sval)\ do\ \{\(\backslash\)}}
\DoxyCodeLine{00063\ \textcolor{preprocessor}{\ \ *(void**)\&sval\ =\ mrb\_data\_get\_ptr(mrb,\ obj,\ type);\ \(\backslash\)}}
\DoxyCodeLine{00064\ \textcolor{preprocessor}{\}\ while\ (0)}}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ \mbox{\hyperlink{common_8h_a353a83c732e8058f59de922c52588fa6}{MRB\_INLINE}}\ \textcolor{keywordtype}{void}}
\DoxyCodeLine{00067\ mrb\_data\_init(\mbox{\hyperlink{structmrb__value}{mrb\_value}}\ v,\ \textcolor{keywordtype}{void}\ *ptr,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structmrb__data__type}{mrb\_data\_type}}\ *type)}
\DoxyCodeLine{00068\ \{}
\DoxyCodeLine{00069\ \ \ mrb\_assert(mrb\_data\_p(v));}
\DoxyCodeLine{00070\ \ \ DATA\_PTR(v)\ =\ ptr;}
\DoxyCodeLine{00071\ \ \ DATA\_TYPE(v)\ =\ type;}
\DoxyCodeLine{00072\ \}}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ \mbox{\hyperlink{common_8h_a7e9674ff871a8abbcaf9ba23fa4b72d3}{MRB\_END\_DECL}}}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ MRUBY\_DATA\_H\ */}\textcolor{preprocessor}{}}

\end{DoxyCode}
